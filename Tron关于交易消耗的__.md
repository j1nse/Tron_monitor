# 题目

# 前提

# 基础介绍

## Energy

智能合约的创建和运行会消耗CPU资源。 智能合约在虚拟机（VM）中运行需要时间，系统消耗的时间以微秒为单位计算。 CPU资源在能量中消耗，这意味着1Energy == 1微秒。 如果合同在VM中执行需要100微秒，则需要消耗100 Energy。 TRON网络提供的总CPU资源在24小时内有50,000,000,000能量。

能量只能通过冻结TRX来获得。 `获得的能量=为获得能量而冻结的TRX /为在整个网络中获得能量而冻结的总TRX * 50_000_000_000`，这是基于冻结TRX的所有用户的等分固定能量。

例如，假设在当前网络中冻结获取能量的TRX总量为1000_000_000 TRX，并且一个帐户冻结1000 TRX，这是总数的百万分之一并且等于32400微秒。 如果执行合同需要324微秒，那么用户可以触发合同100次。

由于网络中的冻结资金总额和冻结的账户资金可能随时发生变化，因此账户拥有的CPU资源不固定。
在冻结资金时，无法获得带宽积分(Bandwidth Points)和能量。 如果你冻结TRX以获得带宽，那么你的能量将不会改变。

### 能源消耗

智能合约的创建和执行消耗能源，而其他正常交易不消耗能源。

### 能量计算方法
能量消耗如下：

尝试消耗交易发起人通过冻结资产获得的能量。 如果能量足够，则扣除并返回其余部分。 如果还不够，那么扣除所有能量并转到下一步。

尝试使用事务发起者的TRX，TRX的数量=所需的能量* 20 SUN。

能量计算器工具
为了估算冻结TRX的能量和最大能量限制以部署/触发智能合约，请使用Tron Station能量工具进行计算。

## 超级代表

投票需要TRON Power，TP的数量取决于选民的冻结资产（TRX）。

TP按以下方式计算：1个TP用于1个冷冻TRX。

超级代表候选人奖励（Vote Reward）：每6小时更新一次的127名候选人将分享115,200 TRX。奖励将根据每位候选人收到的票数进行分配。每年，候选人的总奖励每年将达到168,192,000 TRX

超级代表奖励（Block Reward）：TRON协议网络将每3秒生成一个块，每个块向超级代表授予32 TRX。每年将向27位超级代表颁发336,384,000 TRX。

每当超级代表完成块生产时，奖励将被发送到超级分类账中的子账户。超级代表可以检查，但不能直接使用此资产。可以每24小时提取一次，将奖励从子帐户转移到超级代表的帐户。

### 奖励计算

总奖励=投票奖励+积分奖励

### Vote Reward

每个块的投票奖励为16 TRX，每3秒生成一个块，每分钟生成20个块。

Vote Rewards = 16 (TRX/block) *x* 20 (blocks/min) *x* 60 (min/hour) *x* 6 (hours/election) *x* 4 (elections/day) = 460,800 (TRX/day)

### Block Reward

每个块的块奖励为32 TRX，SR逐个创建块。

32 (TRX/block) *x* 20 (blocks/min) *x* 60 (min/hour) *x* 24 (hours/day) = 921,600 (TRX/Day)

## Bandwidth Points

带宽点是每天帐户的可用字节数。在任何给定的时间段内，整个网络处理固定数量的带宽。帐户中的带宽点与TRON网络的带宽容量之比等于帐户中的冻结余额与整个网络上的冻结余额之比。例如，如果整个网络上的冻结资产总计1,000,000 TRX且一个给定帐户冻结了1,000 TRX（冻结TRX总数的0.1％），则该帐户每天可执行大约300笔交易。注意：由于整个网络和某个帐户的冻结资产数量可能会发生变化，因此帐户持有的带宽点并不总是固定的。

### 消耗流程

在正常事务中，带宽点消耗如下：

消耗交易发起人通过冻结资产获得的带宽点数。 如果点数不足，转到下一步。

使用事务发起者的可用带宽点。 如果点数不足，转到下一步。

使用事务发起者的TRX，计算为事务* 10 SUN中的字节数。

如果交易需要新帐户，则按如下方式使用带宽点数：

消耗事务发起者已冻结获得的带宽点。 如果启动器没有足够的带宽点，转到下一步。

使用事务发起者的TRX，这意味着烧掉0.1TRX。

### 令牌发行转账(Token Issuance Transfer)
如果交易是令牌发放转账，则带宽点消耗如下：

验证已颁发的令牌资产的总可用带宽点是否足够。 然后验证转账发起者的剩余可用带宽点是否足够。 最后，验证令牌发行者已冻结获得的剩余带宽点是否足够。 如果满足这三个要求中的任何一个，则系统从令牌发行者中扣除带宽点。 如果没有，转到下一步。

使用通过冻结资产获得的事务发起者获得的带宽点。 如果积分不足，转到下一步。

使用事务发起者的可用带宽点。 如果积分不足，转到下一步。

使用事务发起者的TRX，为transaction中的字节数 * 10 SUN。

### 带宽消耗

除了查询之外，任何其他类型的交易都会消耗带宽点

1. 如果事务不是令牌传输，则跳到步骤2。如果事务是令牌传输，则TRON尝试从令牌发布者收取带宽点。如果发行方没有足够的带宽点或者费用超出发行方的最大阈值，请转到步骤2。



# 从代码看

# 其他

